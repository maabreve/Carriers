<div ng-controller="carriersEditController as model">
    <form name="carrierForm" class="form-horizontal" ng-submit="model.submitForm(model.carrier.Name,model.carrier.Description,carrierForm.$valid)" novalidate>

        <h2 class="no-margin"> {{ model.title }}</h2>
        <hr />

        <div class="form-group">
            <label class="col-sm-2 control-label">Name: </label>
            <div class="col-sm-10">
                <input id="name" name="name"
                       type="text"
                       required
                       placeholder="Carrier Name"
                       ng-model="model.carrier.Name"
                       class="form-control">
                <span class="help-inline error" ng-show="submitted && (carrierForm.name.$invalid)">Required field.</span>
            </div>
        </div>

        <div class="form-group">
            <label class="col-sm-2 control-label">Description: </label>
            <div class="col-sm-10">
                <input id="description" name="description"
                       type="text"
                       required
                       placeholder="Carrier Description"
                       ng-model="model.carrier.Description"
                       class="form-control">
                <span class="help-inline error" ng-show="submitted && (carrierForm.description.$invalid)">Required field.</span>
            </div>
        </div>
        <div class="form-group text-right">
            <button class="btn btn-default" type="button" ng-click="model.goToList()">
                <span class="fa fa-close"></span> Cancel
            </button>
            <button class="btn btn-primary" type="submit" ng-click="submitted=true;">
                <span class="fa fa-save"></span> Save
            </button>
        </div>
    </form>
    <hr />
    <br />
    <h3 class="no-margin">Ratings </h3>
    <div ng-show="model.canAddRating">
        <form name="ratingForm" class="form-horizontal" ng-submit="model.submitRating(carrierForm.$valid)" novalidate>
            <div class="form-group">
                <label class="col-sm-2 control-label">Rating: </label>
                <div class="col-sm-10">
                    <input id="ratingValue" name="ratingValue"
                           type="number"
                           ng-min="0"
                           ng-max="10"
                           required
                           placeholder="Enter a rating from 0 to 10"
                           ng-model="model.ratingValue"
                           class="form-control">
                    <span class="help-inline error" ng-show="ratingSubmitted && (ratingForm.ratingValue.$required)">Required field.</span>
                    <span class="help-inline error" ng-show="ratingSubmitted && (ratingForm.ratingValue.$invalid)">Invalid field. Type a number between 0 and 5</span>
                </div>
            </div>

            <div class="form-group">
                <label class="col-sm-2 control-label">Comment: </label>
                <div class="col-sm-10">
                    <input id="ratingComment" name="ratingComment"
                           type="text"
                           required
                           placeholder="Enter your comments"
                           ng-model="model.ratingComment"
                           class="form-control">
                    <span class="help-inline error" ng-show="ratingSubmitted && (ratingForm.ratingComment.$invalid)">Required field.</span>
                </div>
            </div>

            <div class="form-group text-right">
                <button class="btn btn-primary" type="submit" ng-click="ratingSubmitted=true;">
                    <span class="fa fa-cart-arrow-down"></span> Save
                </button>
            </div>

        </form>
    </div>

    <hr />


    <section id="" ng-show="model.ratings.length > 0">
        <table class="table table-striped table-responsive">
            <thead>
                <tr>
                    <th>
                        User
                    </th>
                    <th>
                        Rating
                    </th>
                    <th>
                        Comment
                    </th>
                </tr>
            </thead>

            <tbody>
                <tr ng-repeat="item in model.ratings">
                    <td>{{ item.UserName }}</td>
                    <td>{{ item.RatingValue }}</td>
                    <td>{{ item.Comment }}</td>
                </tr>
            </tbody>
        </table>

    </section>

    <span ng-show="model.ratings.length === 0">
        <p>No ratings for this carrier.</p>
    </span>

</div>